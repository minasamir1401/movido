# โ ุชู ุญุฐู ูุธุงู ุณูุฑูุฑุงุช ุงููุดุงูุฏุฉ ุจุงููุงูู

## ๐๏ธ ูุง ุชู ุญุฐูู:

### 1. ุงูุฏูุงู (ูู engine.py):

- โ `_extract_servers()` - ุงุณุชุฎุฑุงุฌ ุณูุฑูุฑุงุช ุงููุดุงูุฏุฉ
- โ `_extract_direct_url()` - ุงุณุชุฎุฑุงุฌ ุฑูุงุจุท ุงูููุฏูู ุงููุจุงุดุฑุฉ
- โ `enrich_server()` - ุชุญุณูู ุจูุงูุงุช ุงูุณูุฑูุฑุงุช
- โ ูู ุงูููุฏ ุงููุชุนูู ุจู play.php

### 2. ุงููููุงุช:

- โ `backend/scraper/extractors/direct_url.py`
- โ `DIRECT_URL_EXTRACTION.md`
- โ `CURL_CFFI_UPGRADE.md`
- โ `VIDEO_GATEWAY_ARCHITECTURE.md`

### 3. ูู API Response:

- โ ุญูู `servers` ุชู ุญุฐูู ุจุงููุงูู

## โ ูุง ุชุจูู:

### ุงูุฏูุงู ุงูุฃุณุงุณูุฉ (engine.py):

```python
โ fetch_home()              # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
โ search()                  # ุงูุจุญุซ
โ fetch_category()          # ุงูุฃูุณุงู
โ fetch_details()           # ุงูุชูุงุตูู
โ _extract_downloads()      # ุฑูุงุจุท ุงูุชุญููู ููุท
โ _extract_series_episodes() # ุญููุงุช ุงููุณูุณูุงุช
```

### API Response ุงูุฌุฏูุฏ:

```json
{
  "id": "xxx",
  "title": "Movie Title",
  "description": "...",
  "poster": "/proxy/image?url=...",
  "type": "movie",
  "download_links": [
    { "quality": "1080p", "url": "https://..." },
    { "quality": "720p", "url": "https://..." }
  ],
  "episodes": []
}
```

## ๐ ุงูููุงุฆุฏ:

### 1. ุงูุจุณุงุทุฉ

- โ ููุฏ ุฃุจุณุท ูุฃุณูู ูู ุงูุตูุงูุฉ
- โ ูุง ุญุงุฌุฉ ููุนุงูุฌุฉ iframe
- โ ูุง ูุดุงูู CORS
- โ ูุง ุญุงุฌุฉ ูู video player

### 2. ุงูููุซูููุฉ

- โ ุฑูุงุจุท ุงูุชุญููู ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู
- โ ูุง ูุดุงูู ุชููุฑ ุงูุณูุฑูุฑุงุช
- โ ูุง ุฃุฎุทุงุก ุชุดุบูู ุงูููุฏูู

### 3. ุงูุฃุฏุงุก

- โ ุงุณุชุฎุฑุงุฌ ุฃุณุฑุน (ุทูุจุงุช HTTP ุฃูู)
- โ ุงุณุชุฌุงุจุงุช API ุฃุตุบุฑ
- โ ูุนุงูุฌุฉ ุฃูู ูู ุงูู backend

### 4. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

- โ ุชุญููู ูุจุงุดุฑ
- โ ูุง ูุดุงูู buffering
- โ ูุดุงูุฏุฉ offline
- โ ุชุญูู ุฃูุถู ูู ุงูุฌูุฏุฉ

## ๐ง ุงูุชุบููุฑุงุช ุงููุทููุจุฉ ูู Frontend:

### 1. ุฅุฒุงูุฉ/ุชุญุฏูุซ Watch Page:

```typescript
// ูุจู:
<ServerSelector servers={servers} />

// ุจุนุฏ:
<DownloadLinks links={download_links} />
```

### 2. ุชุญุฏูุซ API Calls:

```typescript
// ุฅุฒุงูุฉ:
const { servers } = await fetchDetails(id);

// ุงุณุชุฎุฏุงู:
const { download_links } = await fetchDetails(id);
```

### 3. UI Components:

```typescript
// ูุซุงู ุจุณูุท:
{
  download_links.map((link) => (
    <a href={link.url} download>
      ๐ฅ ุชุญููู {link.quality}
    </a>
  ));
}
```

## ๐ ุงููููุงุช ุงููุนุฏูุฉ:

1. โ `backend/scraper/engine.py` - ุชู ุชูุธููู ูู ููุฏ ุงูุณูุฑูุฑุงุช
2. โ `DOWNLOAD_ONLY_SYSTEM.md` - ุงูุชูุซูู ุงูุฌุฏูุฏ
3. โ `CLEANUP_SUMMARY.md` - ูุฐุง ุงูููู

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. โ **Backend ุฌุงูุฒ** - ุชู ุญุฐู ูู ุดูุก ูุชุนูู ุจุงูุณูุฑูุฑุงุช
2. โณ **Frontend** - ูุญุชุงุฌ ุชุญุฏูุซ ูุฅุฒุงูุฉ Watch page ุฃู ุชุญููููุง ูู Download page
3. โณ **Testing** - ุงุฎุชุจุงุฑ ุฑูุงุจุท ุงูุชุญููู

## ๐งช ุงุฎุชุจุงุฑ:

```bash
# ุงุฎุชุจุฑ API:
curl http://localhost:8000/api/movies/details/[VIDEO_ID]

# ูุฌุจ ุฃู ุชุฑู:
{
    "download_links": [...],  # โ ููุฌูุฏ
    "servers": ...            # โ ุบูุฑ ููุฌูุฏ
}
```

---

**ุงูุชุงุฑูุฎ**: 2026-01-10 00:15
**ุงูุญุงูุฉ**: โ ููุชูู
**ุงููุณุฎุฉ**: 3.0.0 (Download-Only)
