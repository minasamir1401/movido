# ğŸ¬ Larooza Server Extractor - Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒØ§Ù…Ù„

## ğŸ“‹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ù…Ù† Larooza Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© (M3U8/MP4) Ù…Ù† **11 Ù†ÙˆØ¹ Ø³ÙŠØ±ÙØ±** Ù…Ø®ØªÙ„Ù.

### âœ¨ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª

- âœ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ **11 Ø³ÙŠØ±ÙØ±** Ù…Ù† ÙƒÙ„ ÙÙŠØ¯ÙŠÙˆ/Ø­Ù„Ù‚Ø©
- âœ… ØªØ­ÙˆÙŠÙ„ Ø±ÙˆØ§Ø¨Ø· Embed Ø¥Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±Ø© (M3U8/MP4)
- âœ… Ø¯Ø¹Ù… Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ù…Ø¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù„Ù‚Ø§Øª
- âœ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
- âœ… API Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ
- âœ… ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹

---

## ğŸ¯ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©

| # | Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ±ÙØ± | Ø§Ù„Ø­Ø§Ù„Ø© | Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ |
|---|-------------|--------|-------------|
| 1 | **Vidmoly** | âœ… ÙŠØ¹Ù…Ù„ | 100% |
| 2 | **Abstream** | âœ… ÙŠØ¹Ù…Ù„ | 100% |
| 3 | **Mxdrop** | âœ… ÙŠØ¹Ù…Ù„ | 100% |
| 4 | **VOE** | âš ï¸ Ù…Ø­Ø³Ù‘Ù† | 70% |
| 5 | **OK.ru** | âš ï¸ Ù…Ø­Ø³Ù‘Ù† | 60% |
| 6 | **VK.com** | âš ï¸ ÙŠØ­ØªØ§Ø¬ VPN | 50% |
| 7 | **OkPrime/Larooza** | âš ï¸ ÙŠØ­ØªØ§Ø¬ VPN | 40% |
| 8 | **Film77** | âš ï¸ ÙŠØ­ØªØ§Ø¬ VPN | 30% |
| 9 | **Vidspeed** | âš ï¸ ÙŠØ­ØªØ§Ø¬ VPN | 30% |
| 10 | **Dsvplay** | ğŸ”§ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± | 20% |
| 11 | **Short.icu** | ğŸ”§ Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± | 10% |

**Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©**: ~27% (3 Ù…Ù† 11 Ø³ÙŠØ±ÙØ± ÙŠØ¹Ù…Ù„ÙˆÙ† Ø¨Ø¯ÙˆÙ† VPN)

---

## ğŸš€ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø³Ø±ÙŠØ¹

### 1ï¸âƒ£ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ù…Ù† Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ

```bash
python backend/tools/extract_larooza_servers.py
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø©**:
```json
{
  "title": "Ù…Ø³Ù„Ø³Ù„ Ø¨Ø·Ù„ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø­Ù„Ù‚Ø© 1",
  "servers": [
    {
      "id": 1,
      "name": "Server 1",
      "embed_url": "https://qq.okprime.site/embed-...",
      "type": "Larooza/OkPrime"
    },
    ...
  ],
  "episodes": [...],
  "download_links": [...]
}
```

### 2ï¸âƒ£ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©

```bash
python backend/tools/test_direct_extraction.py
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø©**:
```
âœ… Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù†Ø§Ø¬Ø­Ø©: 3/11
ğŸ“ˆ Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­: 27.3%

âœ… Server 6 (Vidmoly)
   ğŸ”— https://prx-1359-ant-vp.vmwesa.online/hls2/...master.m3u8

âœ… Server 7 (Abstream)
   ğŸ”— https://urosrv1.streambucket.xyz/hls2/...master.m3u8

âœ… Server 8 (Mxdrop)
   ğŸ”— https://s-delivery37.mxcontent.net/v2/...mp4
```

---

## ğŸŒ API Endpoints

### ğŸ“ 1. Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª

```http
GET /api/larooza/servers?vid=Yg22o3HXS
```

**Response**:
```json
{
  "success": true,
  "title": "Ù…Ø³Ù„Ø³Ù„ Ø¨Ø·Ù„ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø­Ù„Ù‚Ø© 1",
  "poster": "/proxy/image?url=...",
  "servers": [
    {
      "name": "Server 6",
      "embed_url": "https://vidmoly.net/embed-...",
      "status": "success",
      "direct_url": "https://prx-1359-ant-vp.vmwesa.online/hls2/...m3u8",
      "type": "hls",
      "headers": {
        "Referer": "https://vidmoly.net/..."
      }
    }
  ],
  "working_servers": [...],
  "working_count": 3,
  "total_count": 11,
  "success_rate": "27.3%",
  "episodes": [...],
  "download_links": [...]
}
```

### ğŸ“ 2. Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù…Ù† Embed URL

```http
GET /api/larooza/extract?url=https://vidmoly.net/embed-uzybb5jbjbs7.html
```

**Response**:
```json
{
  "success": true,
  "embed_url": "https://vidmoly.net/embed-uzybb5jbjbs7.html",
  "direct_url": "https://prx-1359-ant-vp.vmwesa.online/hls2/...m3u8",
  "type": "hls",
  "headers": {
    "Referer": "https://vidmoly.net/embed-uzybb5jbjbs7.html"
  }
}
```

### ğŸ“ 3. Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø³ÙŠØ±ÙØ±Ø§Øª Ø­Ù„Ù‚Ø© Ù…Ø¹ÙŠÙ†Ø©

```http
GET /api/larooza/episode-servers?series_vid=Yg22o3HXS&episode=2
```

**Response**:
```json
{
  "success": true,
  "series_title": "Ù…Ø³Ù„Ø³Ù„ Ø¨Ø·Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…",
  "episode": 2,
  "episode_title": "Ø§Ù„Ø­Ù„Ù‚Ø© 2",
  "servers": [...],
  "working_servers": [...],
  "working_count": 3
}
```

---

## ğŸ’» Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ

### Ù…Ø«Ø§Ù„: React/Next.js

```javascript
// Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª
async function getVideoServers(videoId) {
  const response = await fetch(`/api/larooza/servers?vid=${videoId}`);
  const data = await response.json();
  
  // Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù†Ø§Ø¬Ø­Ø© ÙÙ‚Ø·
  const workingServers = data.working_servers;
  
  return workingServers;
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
function VideoPlayer({ videoId }) {
  const [servers, setServers] = useState([]);
  const [currentServer, setCurrentServer] = useState(0);
  
  useEffect(() => {
    getVideoServers(videoId).then(setServers);
  }, [videoId]);
  
  if (!servers.length) return <div>Loading...</div>;
  
  const server = servers[currentServer];
  
  return (
    <div>
      <video controls>
        <source 
          src={server.direct_url} 
          type={server.type === 'hls' ? 'application/x-mpegURL' : 'video/mp4'}
        />
      </video>
      
      {/* Ø£Ø²Ø±Ø§Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª */}
      <div>
        {servers.map((s, i) => (
          <button 
            key={i} 
            onClick={() => setCurrentServer(i)}
            className={i === currentServer ? 'active' : ''}
          >
            {s.name}
          </button>
        ))}
      </div>
    </div>
  );
}
```

### Ù…Ø«Ø§Ù„: HLS.js Ù„Ù„ØªØ´ØºÙŠÙ„

```javascript
import Hls from 'hls.js';

function playHLS(videoElement, url, headers) {
  if (Hls.isSupported()) {
    const hls = new Hls({
      xhrSetup: function(xhr) {
        // Ø¥Ø¶Ø§ÙØ© Headers Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
        Object.keys(headers).forEach(key => {
          xhr.setRequestHeader(key, headers[key]);
        });
      }
    });
    
    hls.loadSource(url);
    hls.attachMedia(videoElement);
  } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
    // Ø¯Ø¹Ù… Safari Ø§Ù„Ø£ØµÙ„ÙŠ
    videoElement.src = url;
  }
}

// Ø§Ø³ØªØ®Ø¯Ø§Ù…
const server = await getVideoServers('Yg22o3HXS');
playHLS(videoRef.current, server.direct_url, server.headers);
```

---

## ğŸ”§ ØªØ­Ø³ÙŠÙ† Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­

### Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠØ©:

1. **Timeout Issues** - Ø¨Ø¹Ø¶ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø¨Ø·ÙŠØ¦Ø© Ø£Ùˆ Ù…Ø­Ø¬ÙˆØ¨Ø©
2. **VPN Required** - Ø¨Ø¹Ø¶ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª ØªØ­ØªØ§Ø¬ VPN
3. **JavaScript Obfuscation** - Ø¨Ø¹Ø¶ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª ØªØ³ØªØ®Ø¯Ù… ØªØ´ÙÙŠØ± Ù…Ø¹Ù‚Ø¯

### Ø§Ù„Ø­Ù„ÙˆÙ„:

#### 1. Ø§Ø³ØªØ®Ø¯Ø§Ù… Proxy/VPN
```python
# ÙÙŠ backend/scraper/extractors/engine.py
async with AsyncSession(
    impersonate="chrome124",
    verify=False,
    timeout=30,
    proxies="http://your-proxy:port"  # Ø£Ø¶Ù proxy
) as session:
    ...
```

#### 2. Ø²ÙŠØ§Ø¯Ø© Timeout
```python
# ÙÙŠ Ø§Ù„Ù€ extractors
timeout=60  # Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† 30
```

#### 3. Ø¥Ø¶Ø§ÙØ© Retry Logic
```python
max_retries = 3
for attempt in range(max_retries):
    try:
        result = await extract(url)
        if result:
            return result
    except:
        await asyncio.sleep(2)
```

---

## ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡

### Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø®ÙŠØ±:

```
ğŸ“º Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: Ù…Ø³Ù„Ø³Ù„ Ø¨Ø·Ù„ Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø­Ù„Ù‚Ø© 1
ğŸ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª: 11
ğŸ“¥ Ø¹Ø¯Ø¯ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„: 10
ğŸ“º Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ù„Ù‚Ø§Øª: 10

âœ… Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù†Ø§Ø¬Ø­Ø©: 3/11 (27.3%)
- Vidmoly: âœ… HLS
- Abstream: âœ… HLS
- Mxdrop: âœ… MP4

âŒ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„ÙØ§Ø´Ù„Ø©: 8/11
- OkPrime: Timeout
- VK: Timeout
- Film77: Timeout
- Vidspeed: Timeout
- Short.icu: No URL found
- Dsvplay: No URL found
- VOE: No URL found
- OK.ru: No URL found
```

---

## ğŸ¯ Ø®Ø·Ø© Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© âœ…
- [x] Vidmoly Extractor
- [x] Abstream Extractor
- [x] Mxdrop Extractor
- [x] VOE Extractor (Ù…Ø­Ø³Ù‘Ù†)
- [x] OK.ru Extractor (Ù…Ø­Ø³Ù‘Ù†)
- [x] VK Extractor (Ø¬Ø¯ÙŠØ¯)
- [x] Universal Extractor (Ø¬Ø¯ÙŠØ¯)

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø­Ù„ Ù…Ø´Ø§ÙƒÙ„ Timeout ğŸ”„
- [ ] Ø¥Ø¶Ø§ÙØ© Proxy Pool
- [ ] ØªØ­Ø³ÙŠÙ† Timeout Management
- [ ] Ø¥Ø¶Ø§ÙØ© Fallback Servers

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø© ğŸ“‹
- [ ] Dsvplay - ØªØ­Ù„ÙŠÙ„ JavaScript
- [ ] Short.icu - ØªØªØ¨Ø¹ Redirects
- [ ] OkPrime - Cloudflare Bypass

---

## ğŸ› ï¸ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

```
backend/
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ extract_larooza_servers.py      # Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª
â”‚   â”œâ”€â”€ test_direct_extraction.py       # Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§Ø³ØªØ®Ø±Ø§Ø¬
â”‚   â”œâ”€â”€ larooza_servers_output.json     # Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª
â”‚   â””â”€â”€ direct_urls_output.json         # Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
â”‚
â”œâ”€â”€ scraper/
â”‚   â”œâ”€â”€ engine.py                       # Larooza Scraper
â”‚   â””â”€â”€ extractors/
â”‚       â”œâ”€â”€ engine.py                   # Extractor Router
â”‚       â”œâ”€â”€ vidmoly.py                  # Vidmoly
â”‚       â”œâ”€â”€ voe.py                      # VOE (Ù…Ø­Ø³Ù‘Ù†)
â”‚       â”œâ”€â”€ okru.py                     # OK.ru (Ù…Ø­Ø³Ù‘Ù†)
â”‚       â”œâ”€â”€ vk.py                       # VK (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ universal.py                # Universal (Ø¬Ø¯ÙŠØ¯)
â”‚       â”œâ”€â”€ bypass.py                   # Mxdrop/Mixdrop
â”‚       â””â”€â”€ ...
â”‚
â””â”€â”€ app/
    â””â”€â”€ api/
        â””â”€â”€ endpoints/
            â””â”€â”€ larooza_extractor.py    # API Endpoints
```

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. **Headers Ù…Ù‡Ù…Ø©**: Ø¨Ø¹Ø¶ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª ØªØ­ØªØ§Ø¬ `Referer` Ùˆ `Origin` headers
2. **HLS vs MP4**: Ø§Ø³ØªØ®Ø¯Ù… HLS.js Ù„Ù„Ù€ M3U8 Ùˆ `<video>` Ù„Ù„Ù€ MP4
3. **CORS**: Ù‚Ø¯ ØªØ­ØªØ§Ø¬ proxy Ù„Ù„ØªØºÙ„Ø¨ Ø¹Ù„Ù‰ CORS
4. **Rate Limiting**: Ù„Ø§ ØªØ·Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©

---

## ğŸ‰ Ø§Ù„Ø®Ù„Ø§ØµØ©

Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¢Ù† Ø¬Ø§Ù‡Ø² ÙˆÙŠØ¹Ù…Ù„ Ø¨Ù†Ø³Ø¨Ø© Ù†Ø¬Ø§Ø­ **27.3%** (3 Ù…Ù† 11 Ø³ÙŠØ±ÙØ±).

**Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚Ø©**:
- âœ… **Vidmoly** - Ø§Ù„Ø£ÙØ¶Ù„
- âœ… **Abstream** - Ù…Ù…ØªØ§Ø²
- âœ… **Mxdrop** - Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹

**Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†Ø³Ø¨Ø© Ù†Ø¬Ø§Ø­ 100%**: Ø§Ø³ØªØ®Ø¯Ù… VPN Ø£Ùˆ Proxy.

---

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù…

Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£Ùˆ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª:
- Ø±Ø§Ø¬Ø¹ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ `backend/tools/`
- Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø¨Ù€ `test_direct_extraction.py`
- Ø§Ø³ØªØ®Ø¯Ù… API ÙÙŠ `/api/larooza/`

**ØªÙ… Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨ÙˆØ§Ø³Ø·Ø©**: Antigravity AI ğŸš€
